{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst prismaClientSingleton = () => {\n  return new PrismaClient()\n}\n\ndeclare global {\n  var prismaGlobal: undefined | ReturnType<typeof prismaClientSingleton>\n}\n\nconst prisma = globalThis.prismaGlobal ?? prismaClientSingleton()\n\nexport default prisma\n\nif (process.env.NODE_ENV !== 'production') globalThis.prismaGlobal = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC5B,OAAO,IAAI,6IAAY;AACzB;AAMA,MAAM,SAAS,WAAW,YAAY,IAAI;uCAE3B;AAEf,wCAA2C,WAAW,YAAY,GAAG"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/routes/auth.ts"],"sourcesContent":["import { Hono } from 'hono'\nimport { setCookie } from 'hono/cookie'\nimport { sign } from 'hono/jwt'\nimport { z } from 'zod'\nimport { zValidator } from '@hono/zod-validator'\nimport bcrypt from 'bcryptjs'\nimport prisma from '../db'\n\nconst auth = new Hono()\nconst JWT_SECRET = process.env.JWT_SECRET || 'supersecret'\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string(),\n})\n\nauth.post('/login', zValidator('json', loginSchema), async (c) => {\n  try {\n    const { email, password } = c.req.valid('json')\n\n    console.log('[AUTH] Login attempt for:', email)\n\n    const user = await prisma.user.findUnique({ where: { email } })\n    if (!user) {\n      console.log('[AUTH] User not found:', email)\n      return c.json({ error: 'Invalid credentials' }, 401)\n    }\n\n    console.log('[AUTH] User found, verifying password')\n    const isValid = await bcrypt.compare(password, user.password)\n    if (!isValid) {\n      console.log('[AUTH] Invalid password for:', email)\n      return c.json({ error: 'Invalid credentials' }, 401)\n    }\n\n    const payload = {\n      id: user.id,\n      email: user.email,\n      role: user.role,\n      exp: Math.floor(Date.now() / 1000) + 60 * 60 * 24, // 1 day\n    }\n\n    const token = await sign(payload, JWT_SECRET)\n\n    setCookie(c, 'token', token, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'Strict',\n      path: '/',\n      maxAge: 60 * 60 * 24,\n    })\n\n    console.log('[AUTH] Login successful for:', email)\n    return c.json({ user: { id: user.id, email: user.email, role: user.role, name: user.name } })\n  } catch (error) {\n    console.error('[AUTH] Login error:', error)\n    return c.json({ error: 'Internal server error', details: error instanceof Error ? error.message : 'Unknown error' }, 500)\n  }\n})\n\nauth.post('/logout', (c) => {\n  setCookie(c, 'token', '', {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'Strict',\n    path: '/',\n    maxAge: 0,\n  })\n  return c.json({ message: 'Logged out' })\n})\n\nexport default auth\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;AAEA,MAAM,OAAO,IAAI,8IAAI;AACrB,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAE7C,MAAM,cAAc,oLAAC,CAAC,MAAM,CAAC;IAC3B,OAAO,oLAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,oLAAC,CAAC,MAAM;AACpB;AAEA,KAAK,IAAI,CAAC,UAAU,IAAA,2KAAU,EAAC,QAAQ,cAAc,OAAO;IAC1D,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC;QAExC,QAAQ,GAAG,CAAC,6BAA6B;QAEzC,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE;YAAM;QAAE;QAC7D,IAAI,CAAC,MAAM;YACT,QAAQ,GAAG,CAAC,0BAA0B;YACtC,OAAO,EAAE,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;QAClD;QAEA,QAAQ,GAAG,CAAC;QACZ,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;QAC5D,IAAI,CAAC,SAAS;YACZ,QAAQ,GAAG,CAAC,gCAAgC;YAC5C,OAAO,EAAE,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;QAClD;QAEA,MAAM,UAAU;YACd,IAAI,KAAK,EAAE;YACX,OAAO,KAAK,KAAK;YACjB,MAAM,KAAK,IAAI;YACf,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK,QAAQ,KAAK,KAAK;QACjD;QAEA,MAAM,QAAQ,MAAM,IAAA,kKAAI,EAAC,SAAS;QAElC,IAAA,wKAAS,EAAC,GAAG,SAAS,OAAO;YAC3B,UAAU;YACV,QAAQ,oDAAyB;YACjC,UAAU;YACV,MAAM;YACN,QAAQ,KAAK,KAAK;QACpB;QAEA,QAAQ,GAAG,CAAC,gCAAgC;QAC5C,OAAO,EAAE,IAAI,CAAC;YAAE,MAAM;gBAAE,IAAI,KAAK,EAAE;gBAAE,OAAO,KAAK,KAAK;gBAAE,MAAM,KAAK,IAAI;gBAAE,MAAM,KAAK,IAAI;YAAC;QAAE;IAC7F,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,EAAE,IAAI,CAAC;YAAE,OAAO;YAAyB,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAgB,GAAG;IACvH;AACF;AAEA,KAAK,IAAI,CAAC,WAAW,CAAC;IACpB,IAAA,wKAAS,EAAC,GAAG,SAAS,IAAI;QACxB,UAAU;QACV,QAAQ,oDAAyB;QACjC,UAAU;QACV,MAAM;QACN,QAAQ;IACV;IACA,OAAO,EAAE,IAAI,CAAC;QAAE,SAAS;IAAa;AACxC;uCAEe"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/middleware/auth.ts"],"sourcesContent":["import { Context, Next } from 'hono'\nimport { getCookie } from 'hono/cookie'\nimport { verify } from 'hono/jwt'\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'supersecret'\n\nexport async function authMiddleware(c: Context, next: Next) {\n  const token = getCookie(c, 'token')\n  \n  if (!token) {\n    return c.json({ error: 'Unauthorized' }, 401)\n  }\n\n  try {\n    const payload = await verify(token, JWT_SECRET)\n    c.set('user', payload)\n    await next()\n  } catch (e) {\n    return c.json({ error: 'Unauthorized' }, 401)\n  }\n}\n\nexport function roleMiddleware(allowedRoles: string[]) {\n  return async (c: Context, next: Next) => {\n    const user = c.get('user')\n    if (!user || !allowedRoles.includes(user.role)) {\n      return c.json({ error: 'Forbidden' }, 403)\n    }\n    await next()\n  }\n}\n"],"names":[],"mappings":";;;;;;AACA;AACA;AAAA;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAEtC,eAAe,eAAe,CAAU,EAAE,IAAU;IACzD,MAAM,QAAQ,IAAA,wKAAS,EAAC,GAAG;IAE3B,IAAI,CAAC,OAAO;QACV,OAAO,EAAE,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;IAC3C;IAEA,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,oKAAM,EAAC,OAAO;QACpC,EAAE,GAAG,CAAC,QAAQ;QACd,MAAM;IACR,EAAE,OAAO,GAAG;QACV,OAAO,EAAE,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;IAC3C;AACF;AAEO,SAAS,eAAe,YAAsB;IACnD,OAAO,OAAO,GAAY;QACxB,MAAM,OAAO,EAAE,GAAG,CAAC;QACnB,IAAI,CAAC,QAAQ,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAG;YAC9C,OAAO,EAAE,IAAI,CAAC;gBAAE,OAAO;YAAY,GAAG;QACxC;QACA,MAAM;IACR;AACF"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/routes/users.ts"],"sourcesContent":["import { Hono } from 'hono'\nimport { z } from 'zod'\nimport { zValidator } from '@hono/zod-validator'\nimport bcrypt from 'bcryptjs'\nimport prisma from '../db'\nimport { authMiddleware, roleMiddleware } from '../middleware/auth'\n\nconst users = new Hono()\n\nusers.use('*', authMiddleware)\nusers.use('*', roleMiddleware(['ADMIN']))\n\nconst createUserSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n  name: z.string().optional(),\n  role: z.enum(['ADMIN', 'SUPERVISOR', 'OPERATOR', 'CLIENT']),\n})\n\nusers.get('/', async (c) => {\n  const allUsers = await prisma.user.findMany({\n    select: { id: true, email: true, name: true, role: true, createdAt: true },\n  })\n  return c.json(allUsers)\n})\n\nusers.post('/', zValidator('json', createUserSchema), async (c) => {\n  const { email, password, name, role } = c.req.valid('json')\n\n  const existingUser = await prisma.user.findUnique({ where: { email } })\n  if (existingUser) {\n    return c.json({ error: 'User already exists' }, 400)\n  }\n\n  const hashedPassword = await bcrypt.hash(password, 10)\n\n  const newUser = await prisma.user.create({\n    data: {\n      email,\n      password: hashedPassword,\n      name,\n      role,\n    },\n    select: { id: true, email: true, name: true, role: true },\n  })\n\n  return c.json(newUser)\n})\n\nexport default users\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEA,MAAM,QAAQ,IAAI,8IAAI;AAEtB,MAAM,GAAG,CAAC,KAAK,uJAAc;AAC7B,MAAM,GAAG,CAAC,KAAK,IAAA,uJAAc,EAAC;IAAC;CAAQ;AAEvC,MAAM,mBAAmB,oLAAC,CAAC,MAAM,CAAC;IAChC,OAAO,oLAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACzB,MAAM,oLAAC,CAAC,MAAM,GAAG,QAAQ;IACzB,MAAM,oLAAC,CAAC,IAAI,CAAC;QAAC;QAAS;QAAc;QAAY;KAAS;AAC5D;AAEA,MAAM,GAAG,CAAC,KAAK,OAAO;IACpB,MAAM,WAAW,MAAM,gIAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QAC1C,QAAQ;YAAE,IAAI;YAAM,OAAO;YAAM,MAAM;YAAM,MAAM;YAAM,WAAW;QAAK;IAC3E;IACA,OAAO,EAAE,IAAI,CAAC;AAChB;AAEA,MAAM,IAAI,CAAC,KAAK,IAAA,2KAAU,EAAC,QAAQ,mBAAmB,OAAO;IAC3D,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC;IAEpD,MAAM,eAAe,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QAAE,OAAO;YAAE;QAAM;IAAE;IACrE,IAAI,cAAc;QAChB,OAAO,EAAE,IAAI,CAAC;YAAE,OAAO;QAAsB,GAAG;IAClD;IAEA,MAAM,iBAAiB,MAAM,8IAAM,CAAC,IAAI,CAAC,UAAU;IAEnD,MAAM,UAAU,MAAM,gIAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACvC,MAAM;YACJ;YACA,UAAU;YACV;YACA;QACF;QACA,QAAQ;YAAE,IAAI;YAAM,OAAO;YAAM,MAAM;YAAM,MAAM;QAAK;IAC1D;IAEA,OAAO,EAAE,IAAI,CAAC;AAChB;uCAEe"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/routes/leads.ts"],"sourcesContent":["import { Hono } from 'hono'\nimport { z } from 'zod'\nimport { zValidator } from '@hono/zod-validator'\nimport prisma from '../db'\nimport { authMiddleware } from '../middleware/auth'\n\nconst leads = new Hono()\n\nleads.use('*', authMiddleware)\n\nconst createLeadSchema = z.object({\n  name: z.string(),\n  email: z.string().email(),\n  phone: z.string().optional(),\n  status: z.enum(['NEW', 'CONTACTED', 'QUALIFIED', 'PROPOSAL', 'NEGOTIATION', 'WON', 'LOST']).optional(),\n  operatorId: z.string().optional(),\n})\n\nleads.get('/', async (c) => {\n  const allLeads = await prisma.lead.findMany({\n    include: { operator: { select: { name: true } } },\n    orderBy: { createdAt: 'desc' },\n  })\n  return c.json(allLeads)\n})\n\nleads.post('/', zValidator('json', createLeadSchema), async (c) => {\n  const data = c.req.valid('json')\n  const lead = await prisma.lead.create({ data })\n  return c.json(lead)\n})\n\nleads.patch('/:id/status', zValidator('json', z.object({ status: z.enum(['NEW', 'CONTACTED', 'QUALIFIED', 'PROPOSAL', 'NEGOTIATION', 'WON', 'LOST']) })), async (c) => {\n  const id = c.req.param('id')\n  const { status } = c.req.valid('json')\n  \n  const lead = await prisma.lead.update({\n    where: { id },\n    data: { status },\n  })\n  \n  return c.json(lead)\n})\n\nexport default leads\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,QAAQ,IAAI,8IAAI;AAEtB,MAAM,GAAG,CAAC,KAAK,uJAAc;AAE7B,MAAM,mBAAmB,oLAAC,CAAC,MAAM,CAAC;IAChC,MAAM,oLAAC,CAAC,MAAM;IACd,OAAO,oLAAC,CAAC,MAAM,GAAG,KAAK;IACvB,OAAO,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAC1B,QAAQ,oLAAC,CAAC,IAAI,CAAC;QAAC;QAAO;QAAa;QAAa;QAAY;QAAe;QAAO;KAAO,EAAE,QAAQ;IACpG,YAAY,oLAAC,CAAC,MAAM,GAAG,QAAQ;AACjC;AAEA,MAAM,GAAG,CAAC,KAAK,OAAO;IACpB,MAAM,WAAW,MAAM,gIAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QAC1C,SAAS;YAAE,UAAU;gBAAE,QAAQ;oBAAE,MAAM;gBAAK;YAAE;QAAE;QAChD,SAAS;YAAE,WAAW;QAAO;IAC/B;IACA,OAAO,EAAE,IAAI,CAAC;AAChB;AAEA,MAAM,IAAI,CAAC,KAAK,IAAA,2KAAU,EAAC,QAAQ,mBAAmB,OAAO;IAC3D,MAAM,OAAO,EAAE,GAAG,CAAC,KAAK,CAAC;IACzB,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QAAE;IAAK;IAC7C,OAAO,EAAE,IAAI,CAAC;AAChB;AAEA,MAAM,KAAK,CAAC,eAAe,IAAA,2KAAU,EAAC,QAAQ,oLAAC,CAAC,MAAM,CAAC;IAAE,QAAQ,oLAAC,CAAC,IAAI,CAAC;QAAC;QAAO;QAAa;QAAa;QAAY;QAAe;QAAO;KAAO;AAAE,KAAK,OAAO;IAC/J,MAAM,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC;IACvB,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC;IAE/B,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACpC,OAAO;YAAE;QAAG;QACZ,MAAM;YAAE;QAAO;IACjB;IAEA,OAAO,EAAE,IAAI,CAAC;AAChB;uCAEe"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/routes/products.ts"],"sourcesContent":["import { Hono } from 'hono'\nimport { z } from 'zod'\nimport { zValidator } from '@hono/zod-validator'\nimport prisma from '../db'\nimport { authMiddleware } from '../middleware/auth'\n\nconst products = new Hono()\n\nproducts.use('*', authMiddleware)\n\nconst createProductSchema = z.object({\n  name: z.string(),\n  price: z.number(),\n  metadata: z.record(z.any()).optional(), // bedrooms, bathrooms, etc.\n})\n\nproducts.get('/', async (c) => {\n  const allProducts = await prisma.product.findMany({\n    orderBy: { createdAt: 'desc' },\n  })\n  return c.json(allProducts)\n})\n\nproducts.post('/', zValidator('json', createProductSchema), async (c) => {\n  const { name, price, metadata } = c.req.valid('json')\n  \n  const product = await prisma.product.create({\n    data: {\n      name,\n      price,\n      metadata: metadata || {},\n    },\n  })\n  \n  return c.json(product)\n})\n\nexport default products\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,WAAW,IAAI,8IAAI;AAEzB,SAAS,GAAG,CAAC,KAAK,uJAAc;AAEhC,MAAM,sBAAsB,oLAAC,CAAC,MAAM,CAAC;IACnC,MAAM,oLAAC,CAAC,MAAM;IACd,OAAO,oLAAC,CAAC,MAAM;IACf,UAAU,oLAAC,CAAC,MAAM,CAAC,oLAAC,CAAC,GAAG,IAAI,QAAQ;AACtC;AAEA,SAAS,GAAG,CAAC,KAAK,OAAO;IACvB,MAAM,cAAc,MAAM,gIAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QAChD,SAAS;YAAE,WAAW;QAAO;IAC/B;IACA,OAAO,EAAE,IAAI,CAAC;AAChB;AAEA,SAAS,IAAI,CAAC,KAAK,IAAA,2KAAU,EAAC,QAAQ,sBAAsB,OAAO;IACjE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC;IAE9C,MAAM,UAAU,MAAM,gIAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QAC1C,MAAM;YACJ;YACA;YACA,UAAU,YAAY,CAAC;QACzB;IACF;IAEA,OAAO,EAAE,IAAI,CAAC;AAChB;uCAEe"}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/routes/clients.ts"],"sourcesContent":["import { Hono } from 'hono'\nimport prisma from '../db'\nimport { authMiddleware } from '../middleware/auth'\n\nconst clients = new Hono()\n\nclients.use('*', authMiddleware)\n\nclients.get('/', async (c) => {\n  const allClients = await prisma.client.findMany({\n    include: {\n      user: { select: { name: true, email: true } },\n      products: { include: { product: true } },\n    },\n  })\n  return c.json(allClients)\n})\n\nclients.get('/:id', async (c) => {\n  const id = c.req.param('id')\n  const client = await prisma.client.findUnique({\n    where: { id },\n    include: {\n      user: { select: { name: true, email: true } },\n      products: { include: { product: true } },\n      claims: true,\n    },\n  })\n  \n  if (!client) return c.json({ error: 'Client not found' }, 404)\n  \n  return c.json(client)\n})\n\nexport default clients\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;;;;AAEA,MAAM,UAAU,IAAI,8IAAI;AAExB,QAAQ,GAAG,CAAC,KAAK,uJAAc;AAE/B,QAAQ,GAAG,CAAC,KAAK,OAAO;IACtB,MAAM,aAAa,MAAM,gIAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;QAC9C,SAAS;YACP,MAAM;gBAAE,QAAQ;oBAAE,MAAM;oBAAM,OAAO;gBAAK;YAAE;YAC5C,UAAU;gBAAE,SAAS;oBAAE,SAAS;gBAAK;YAAE;QACzC;IACF;IACA,OAAO,EAAE,IAAI,CAAC;AAChB;AAEA,QAAQ,GAAG,CAAC,QAAQ,OAAO;IACzB,MAAM,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC;IACvB,MAAM,SAAS,MAAM,gIAAM,CAAC,MAAM,CAAC,UAAU,CAAC;QAC5C,OAAO;YAAE;QAAG;QACZ,SAAS;YACP,MAAM;gBAAE,QAAQ;oBAAE,MAAM;oBAAM,OAAO;gBAAK;YAAE;YAC5C,UAAU;gBAAE,SAAS;oBAAE,SAAS;gBAAK;YAAE;YACvC,QAAQ;QACV;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO,EAAE,IAAI,CAAC;QAAE,OAAO;IAAmB,GAAG;IAE1D,OAAO,EAAE,IAAI,CAAC;AAChB;uCAEe"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/routes/claims.ts"],"sourcesContent":["import { Hono } from 'hono'\nimport { z } from 'zod'\nimport { zValidator } from '@hono/zod-validator'\nimport prisma from '../db'\nimport { authMiddleware } from '../middleware/auth'\n\nconst claims = new Hono()\n\nclaims.use('*', authMiddleware)\n\nconst createClaimSchema = z.object({\n  title: z.string(),\n  description: z.string(),\n  clientId: z.string(),\n})\n\nclaims.get('/', async (c) => {\n  const allClaims = await prisma.claim.findMany({\n    include: {\n      client: { include: { user: { select: { name: true } } } },\n      operator: { select: { name: true } },\n    },\n    orderBy: { createdAt: 'desc' },\n  })\n  return c.json(allClaims)\n})\n\nclaims.post('/', zValidator('json', createClaimSchema), async (c) => {\n  const { title, description, clientId } = c.req.valid('json')\n  \n  const claim = await prisma.claim.create({\n    data: {\n      title,\n      description,\n      clientId,\n      status: 'SUBMITTED',\n    },\n  })\n  \n  return c.json(claim)\n})\n\nclaims.patch('/:id/status', zValidator('json', z.object({ status: z.enum(['SUBMITTED', 'IN_REVIEW', 'RESOLVED']) })), async (c) => {\n  const id = c.req.param('id')\n  const { status } = c.req.valid('json')\n  \n  const claim = await prisma.claim.update({\n    where: { id },\n    data: { status },\n  })\n  \n  return c.json(claim)\n})\n\n// Placeholder for S3 Presigned URL\nclaims.post('/upload-url', zValidator('json', z.object({ filename: z.string(), contentType: z.string() })), async (c) => {\n  const { filename, contentType } = c.req.valid('json')\n  // In a real app, use AWS SDK to generate presigned URL\n  // const command = new PutObjectCommand({ Bucket: '...', Key: filename, ContentType: contentType })\n  // const url = await getSignedUrl(s3Client, command, { expiresIn: 3600 })\n  \n  return c.json({ \n    uploadUrl: `https://fake-s3-url.com/${filename}`, \n    publicUrl: `https://fake-s3-url.com/${filename}` \n  })\n})\n\nexport default claims\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,SAAS,IAAI,8IAAI;AAEvB,OAAO,GAAG,CAAC,KAAK,uJAAc;AAE9B,MAAM,oBAAoB,oLAAC,CAAC,MAAM,CAAC;IACjC,OAAO,oLAAC,CAAC,MAAM;IACf,aAAa,oLAAC,CAAC,MAAM;IACrB,UAAU,oLAAC,CAAC,MAAM;AACpB;AAEA,OAAO,GAAG,CAAC,KAAK,OAAO;IACrB,MAAM,YAAY,MAAM,gIAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;QAC5C,SAAS;YACP,QAAQ;gBAAE,SAAS;oBAAE,MAAM;wBAAE,QAAQ;4BAAE,MAAM;wBAAK;oBAAE;gBAAE;YAAE;YACxD,UAAU;gBAAE,QAAQ;oBAAE,MAAM;gBAAK;YAAE;QACrC;QACA,SAAS;YAAE,WAAW;QAAO;IAC/B;IACA,OAAO,EAAE,IAAI,CAAC;AAChB;AAEA,OAAO,IAAI,CAAC,KAAK,IAAA,2KAAU,EAAC,QAAQ,oBAAoB,OAAO;IAC7D,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC;IAErD,MAAM,QAAQ,MAAM,gIAAM,CAAC,KAAK,CAAC,MAAM,CAAC;QACtC,MAAM;YACJ;YACA;YACA;YACA,QAAQ;QACV;IACF;IAEA,OAAO,EAAE,IAAI,CAAC;AAChB;AAEA,OAAO,KAAK,CAAC,eAAe,IAAA,2KAAU,EAAC,QAAQ,oLAAC,CAAC,MAAM,CAAC;IAAE,QAAQ,oLAAC,CAAC,IAAI,CAAC;QAAC;QAAa;QAAa;KAAW;AAAE,KAAK,OAAO;IAC3H,MAAM,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC;IACvB,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC;IAE/B,MAAM,QAAQ,MAAM,gIAAM,CAAC,KAAK,CAAC,MAAM,CAAC;QACtC,OAAO;YAAE;QAAG;QACZ,MAAM;YAAE;QAAO;IACjB;IAEA,OAAO,EAAE,IAAI,CAAC;AAChB;AAEA,mCAAmC;AACnC,OAAO,IAAI,CAAC,eAAe,IAAA,2KAAU,EAAC,QAAQ,oLAAC,CAAC,MAAM,CAAC;IAAE,UAAU,oLAAC,CAAC,MAAM;IAAI,aAAa,oLAAC,CAAC,MAAM;AAAG,KAAK,OAAO;IACjH,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC;IAC9C,uDAAuD;IACvD,mGAAmG;IACnG,yEAAyE;IAEzE,OAAO,EAAE,IAAI,CAAC;QACZ,WAAW,CAAC,wBAAwB,EAAE,UAAU;QAChD,WAAW,CAAC,wBAAwB,EAAE,UAAU;IAClD;AACF;uCAEe"}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/server/app.ts"],"sourcesContent":["import { Hono } from 'hono'\nimport { logger } from 'hono/logger'\nimport { cors } from 'hono/cors'\nimport { prettyJSON } from 'hono/pretty-json'\nimport { secureHeaders } from 'hono/secure-headers'\nimport auth from './routes/auth'\nimport users from './routes/users'\nimport leads from './routes/leads'\nimport products from './routes/products'\nimport clients from './routes/clients'\nimport claims from './routes/claims'\nimport prisma from './db'\n\nconst app = new Hono()\n\napp.use('*', logger())\napp.use('*', prettyJSON())\napp.use('*', secureHeaders())\napp.use('*', cors())\n\n// Health check endpoint\napp.get('/health', async (c) => {\n  try {\n    // Check database connection\n    await prisma.$queryRaw`SELECT 1`\n    const userCount = await prisma.user.count()\n    \n    return c.json({\n      status: 'ok',\n      database: 'connected',\n      userCount,\n      env: {\n        hasDbUrl: !!process.env.DATABASE_URL,\n        hasJwtSecret: !!process.env.JWT_SECRET,\n        nodeEnv: process.env.NODE_ENV,\n      }\n    })\n  } catch (error) {\n    return c.json({\n      status: 'error',\n      database: 'disconnected',\n      error: error instanceof Error ? error.message : 'Unknown error',\n      env: {\n        hasDbUrl: !!process.env.DATABASE_URL,\n        hasJwtSecret: !!process.env.JWT_SECRET,\n        nodeEnv: process.env.NODE_ENV,\n      }\n    }, 500)\n  }\n})\n\napp.route('/auth', auth)\napp.route('/users', users)\napp.route('/leads', leads)\napp.route('/products', products)\napp.route('/clients', clients)\napp.route('/claims', claims)\n\nexport default app\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAEA,MAAM,MAAM,IAAI,8IAAI;AAEpB,IAAI,GAAG,CAAC,KAAK,IAAA,yKAAM;AACnB,IAAI,GAAG,CAAC,KAAK,IAAA,qLAAU;AACvB,IAAI,GAAG,CAAC,KAAK,IAAA,uMAAa;AAC1B,IAAI,GAAG,CAAC,KAAK,IAAA,qKAAI;AAEjB,wBAAwB;AACxB,IAAI,GAAG,CAAC,WAAW,OAAO;IACxB,IAAI;QACF,4BAA4B;QAC5B,MAAM,gIAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;QAChC,MAAM,YAAY,MAAM,gIAAM,CAAC,IAAI,CAAC,KAAK;QAEzC,OAAO,EAAE,IAAI,CAAC;YACZ,QAAQ;YACR,UAAU;YACV;YACA,KAAK;gBACH,UAAU,CAAC,CAAC,QAAQ,GAAG,CAAC,YAAY;gBACpC,cAAc,CAAC,CAAC,QAAQ,GAAG,CAAC,UAAU;gBACtC,OAAO;YACT;QACF;IACF,EAAE,OAAO,OAAO;QACd,OAAO,EAAE,IAAI,CAAC;YACZ,QAAQ;YACR,UAAU;YACV,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAChD,KAAK;gBACH,UAAU,CAAC,CAAC,QAAQ,GAAG,CAAC,YAAY;gBACpC,cAAc,CAAC,CAAC,QAAQ,GAAG,CAAC,UAAU;gBACtC,OAAO;YACT;QACF,GAAG;IACL;AACF;AAEA,IAAI,KAAK,CAAC,SAAS,4IAAI;AACvB,IAAI,KAAK,CAAC,UAAU,6IAAK;AACzB,IAAI,KAAK,CAAC,UAAU,6IAAK;AACzB,IAAI,KAAK,CAAC,aAAa,gJAAQ;AAC/B,IAAI,KAAK,CAAC,YAAY,+IAAO;AAC7B,IAAI,KAAK,CAAC,WAAW,8IAAM;uCAEZ"}},
    {"offset": {"line": 649, "column": 0}, "map": {"version":3,"sources":["file:///home/mskhairi/Rea-Estate_app/src/app/api/%5B...route%5D/route.ts"],"sourcesContent":["import { handle } from 'hono/vercel'\nimport app from '@/server/app'\n\nexport const runtime = 'nodejs' // Prisma needs nodejs runtime\n\nexport const GET = handle(app)\nexport const POST = handle(app)\nexport const PUT = handle(app)\nexport const DELETE = handle(app)\nexport const PATCH = handle(app)\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;AACA;;;AAEO,MAAM,UAAU,SAAS,8BAA8B;;AAEvD,MAAM,MAAM,IAAA,wKAAM,EAAC,iIAAG;AACtB,MAAM,OAAO,IAAA,wKAAM,EAAC,iIAAG;AACvB,MAAM,MAAM,IAAA,wKAAM,EAAC,iIAAG;AACtB,MAAM,SAAS,IAAA,wKAAM,EAAC,iIAAG;AACzB,MAAM,QAAQ,IAAA,wKAAM,EAAC,iIAAG"}}]
}